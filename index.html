<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grupos de Investigación</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container py-4">
  <h1 class="mb-4">Gestión de Grupos de Investigación</h1>

  <!-- Listado de grupos -->
  <button id="btnCargar" class="btn btn-primary mb-3">Cargar Grupos</button>
  <ul id="listaGrupos" class="list-group mb-4"></ul>

  <!-- Registrar docente -->
  <h2>Registrar Docente</h2>
  <form id="formDocente" class="mb-4">
    <input type="text" class="form-control mb-2" name="nombre" placeholder="Nombre docente" required>
    <input type="text" class="form-control mb-2" name="formacion" placeholder="Formación académica" required>
    <input type="text" class="form-control mb-2" name="horario" placeholder="Horario de atención" required>
    <select class="form-control mb-2" name="grupo">
      <option value="COMBA I+D">COMBA I+D</option>
      <option value="GIEIAM">GIEIAM</option>
    </select>
    <button type="submit" class="btn btn-success">Registrar</button>
  </form>

  <!-- Vincular estudiante -->
  <h2>Vincular Estudiante a Semillero</h2>
  <form id="formEstudiante" class="mb-4">
    <input type="text" class="form-control mb-2" name="nombre" placeholder="Nombre estudiante" required>
    <input type="text" class="form-control mb-2" name="codigo" placeholder="Código" required>
    <input type="text" class="form-control mb-2" name="carrera" placeholder="Carrera" required>
    <select class="form-control mb-2" name="semillero">
      <option value="Comba">Comba</option>
      <option value="Informa">Informa</option>
    </select>
    <button type="submit" class="btn btn-primary">Vincular</button>
  </form>

  <!-- Agregar actividad -->
  <h2>Agregar Actividad a Semillero</h2>
  <form id="formActividad" class="mb-4">
    <select class="form-control mb-2" name="tipo" required>
      <option value="Taller">Taller</option>
      <option value="Conferencia">Conferencia</option>
      <option value="Evento">Evento</option>
    </select>
    <input type="date" class="form-control mb-2" name="fecha" required>
    <input type="time" class="form-control mb-2" name="hora" required>
    <input type="number" class="form-control mb-2" name="limite" placeholder="Límite de asistentes" required>
    <textarea class="form-control mb-2" name="resumen" placeholder="Resumen" required></textarea>
    <button type="submit" class="btn btn-warning">Agregar Actividad</button>
  </form>

  <div id="actividades" class="mb-4"></div>

  <script>
    const lista = document.getElementById("listaGrupos");
    const btnCargar = document.getElementById("btnCargar");
    const formDocente = document.getElementById("formDocente");
    const formEstudiante = document.getElementById("formEstudiante");
    const formActividad = document.getElementById("formActividad");
    const contActividades = document.getElementById("actividades");
    let actividades = [];

    // GET - cargar grupos simulados
    btnCargar.addEventListener("click", async () => {
      lista.innerHTML = "";
      const resp = await fetch("https://jsonplaceholder.typicode.com/users");
      const data = await resp.json();
      // Mostrar solo 2 grupos simulados
      const grupos = [
        { nombre: "COMBA I+D", objetivos: "Innovación y desarrollo en software" },
        { nombre: "GIEIAM", objetivos: "Gestión e investigación en ingeniería aplicada" }
      ];
      grupos.forEach(g => {
        const li = document.createElement("li");
        li.className = "list-group-item";
        li.innerHTML = `<strong>${g.nombre}</strong><br>${g.objetivos}`;
        lista.appendChild(li);
      });
    });

    // POST - registrar docente
    formDocente.addEventListener("submit", async (e) => {
      e.preventDefault();
      const datos = Object.fromEntries(new FormData(formDocente).entries());
      const resp = await fetch("https://jsonplaceholder.typicode.com/posts", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(datos)
      });
      const json = await resp.json();
      alert("Docente registrado con ID: " + json.id);
      formDocente.reset();
    });

    // POST - vincular estudiante
    formEstudiante.addEventListener("submit", async (e) => {
      e.preventDefault();
      const datos = Object.fromEntries(new FormData(formEstudiante).entries());
      const resp = await fetch("https://jsonplaceholder.typicode.com/posts", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(datos)
      });
      const json = await resp.json();
      alert("Estudiante vinculado con ID: " + json.id);
      formEstudiante.reset();
    });

    // Agregar actividad local
    formActividad.addEventListener("submit", (e) => {
      e.preventDefault();
      const datos = Object.fromEntries(new FormData(formActividad).entries());
      actividades.push(datos);
      mostrarActividades();
      formActividad.reset();
    });

    function mostrarActividades() {
      contActividades.innerHTML = "<h3>Actividades Registradas</h3>";
      if (actividades.length === 0) {
        contActividades.innerHTML += "<p class='text-muted'>No hay actividades registradas.</p>";
        return;
      }
      const ul = document.createElement("ul");
      ul.className = "list-group";
      actividades.forEach(a => {
        const li = document.createElement("li");
        li.className = "list-group-item";
        li.innerHTML = `<strong>${a.tipo}</strong> - ${a.fecha} ${a.hora} <br>Límite: ${a.limite} <br>${a.resumen}`;
        ul.appendChild(li);
      });
      contActividades.appendChild(ul);
    }
  </script>
</body>
</html>
